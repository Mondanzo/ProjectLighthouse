@using LBPUnion.ProjectLighthouse.Administration.Reports
@model LBPUnion.ProjectLighthouse.Administration.Reports.GriefReport

    <div class="report box-background">
        <div class="divider-dashed no-margin"></div>
        <div class="report-picture box-margin">
            <canvas class="hide-subjects" id="canvas-subjects-@Model.ReportId" width="1920" height="1080"
                    style="position: absolute; transform: rotate(180deg)">
            </canvas>
            <img class="hover-region" id="game-image-@Model.ReportId" src="/gameAssets/@Model.JpegHash" alt="Grief report picture" style="width: 100%; height: auto; border-radius: .28571429rem;">
        </div>
        <p>
            <i>
                Report submitted by
                <b>
                    <a href="/user/@Model.ReportingPlayerId">@Model.ReportingPlayer.Username</a>
                </b>
            </i>
        </p>
        <b class="hover-players" id="hover-subjects-2-@Model.ReportId">Report contains @Model.XmlPlayers.Length @(Model.XmlPlayers.Length == 1 ? "player" : "players")</b>
        @foreach (ReportPlayer player in Model.XmlPlayers)
        {
            <div id="hover-subjects-@Model.ReportId" class="hover-players">
                <a href="/">@player.Name</a>
            </div>
        }

        <div class="report-info">
            <div class="divider-solid no-margin"></div>
            <p><span class="report-info-highlight">Report time: </span>@(DateTimeOffset.FromUnixTimeMilliseconds(Model.Timestamp).ToString("R"))</p>
            <p><span class="report-info-highlight">Report reason: </span>@Model.Type</p>
            <p><span class="report-info-highlight">Level ID:</span> @Model.LevelId</p>
            <p><span class="report-info-highlight">Level type:</span> @Model.LevelType</p>
            <p><span class="report-info-highlight">Level owner:</span> @Model.LevelOwner</p>
            <div class="divider-solid no-margin"></div>
        </div>
        <div class="buttons box-margin">
            <a class="bg-green button" href="/admin/report/@Model.ReportId/dismiss">
                <i class="bx bx-check"></i>
                <span>Dismiss</span>
            </a>
            <a class="bg-pink button" href="/admin/report/@Model.ReportId/remove">
                <i class="bx bx-trash"></i>
                <span>Remove all related assets</span>
            </a>
        </div>
        <div class="divider-dashed no-margin"></div>
    </div>
    <script>
        subjects[@Model.ReportId] = @Html.Raw(Model.Players)
        bounds[@Model.ReportId] = @Html.Raw(Model.Bounds)
        images[@Model.ReportId] = document.getElementById("game-image-@Model.ReportId")
        canvases[@Model.ReportId] = document.getElementById("canvas-subjects-@Model.ReportId")
        canvases[@Model.ReportId].width = images[@Model.ReportId].offsetWidth;
        canvases[@Model.ReportId].height = images[@Model.ReportId].clientHeight;
        ctx[@Model.ReportId] = canvases[@Model.ReportId].getContext('2d');
    </script>

